{"numFailedTestSuites":0,"numFailedTests":0,"numPassedTestSuites":8,"numPassedTests":17,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":8,"numTotalTests":17,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1763920718878,"success":true,"testResults":[{"assertionResults":[{"ancestorTitles":["Order service basic endpoints"],"duration":23,"failureDetails":[],"failureMessages":[],"fullName":"Order service basic endpoints GET /health returns status 200","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"GET /health returns status 200"},{"ancestorTitles":["Order service basic endpoints"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"Order service basic endpoints GET /metrics returns prometheus metrics text","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"GET /metrics returns prometheus metrics text"},{"ancestorTitles":["Order service basic endpoints"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Order service basic endpoints Unknown route returns 404 JSON","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Unknown route returns 404 JSON"}],"endTime":1763920719811,"message":"","name":"D:\\cnpm\\cnpm\\order\\__tests__\\app.test.js","startTime":1763920718919,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Order service - 404 handler"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"Order service - 404 handler trả về 404 cho route không tồn tại","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"trả về 404 cho route không tồn tại"}],"endTime":1763920720211,"message":"","name":"D:\\cnpm\\cnpm\\order\\tests\\not-found.test.js","startTime":1763920719816,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Order service - /health"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"Order service - /health trả về status ok","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"trả về status ok"}],"endTime":1763920720597,"message":"","name":"D:\\cnpm\\cnpm\\order\\tests\\health.test.js","startTime":1763920720214,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["PATCH /api/orders/:orderId/payment/status"],"duration":21,"failureDetails":[],"failureMessages":[],"fullName":"PATCH /api/orders/:orderId/payment/status returns 400 when status or transaction is missing","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"returns 400 when status or transaction is missing"},{"ancestorTitles":["PATCH /api/orders/:orderId/payment/status"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"PATCH /api/orders/:orderId/payment/status returns 200 and updated order when payload is valid","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"returns 200 and updated order when payload is valid"}],"endTime":1763920721038,"message":"","name":"D:\\cnpm\\cnpm\\order\\tests\\order.paymentStatus.controller.test.js","startTime":1763920720600,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Order routes (integration)"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"Order routes (integration) GET /api/orders returns paginated orders for authenticated customer","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"GET /api/orders returns paginated orders for authenticated customer"}],"endTime":1763920721425,"message":"","name":"D:\\cnpm\\cnpm\\order\\tests\\order.routes.integration.test.js","startTime":1763920721042,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["updateOrderPaymentStatus controller - validation"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"updateOrderPaymentStatus controller - validation trả 400 nếu thiếu status","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"trả 400 nếu thiếu status"},{"ancestorTitles":["updateOrderPaymentStatus controller - validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"updateOrderPaymentStatus controller - validation trả 400 nếu thiếu transactionId trong paymentDetails","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"trả 400 nếu thiếu transactionId trong paymentDetails"}],"endTime":1763920721700,"message":"","name":"D:\\cnpm\\cnpm\\order\\tests\\order.payemntStatus.route.test.js","startTime":1763920721428,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["orderController (unit)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"orderController (unit) getOrdersByIds returns 400 when orderIds is missing","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"getOrdersByIds returns 400 when orderIds is missing"},{"ancestorTitles":["orderController (unit)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"orderController (unit) getOrdersByIds returns missingIds when some orders are not found","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"getOrdersByIds returns missingIds when some orders are not found"},{"ancestorTitles":["orderController (unit)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"orderController (unit) updateOrderPaymentStatus returns 200 and updated order when status is valid","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"updateOrderPaymentStatus returns 200 and updated order when status is valid"},{"ancestorTitles":["orderController (unit)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"orderController (unit) queryOrders returns 400 when startDate or endDate is missing","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"queryOrders returns 400 when startDate or endDate is missing"}],"endTime":1763920721974,"message":"","name":"D:\\cnpm\\cnpm\\order\\tests\\order.controller.unit.test.js","startTime":1763920721706,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["authorize middleware"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"authorize middleware trả 401 nếu chưa đăng nhập (không có req.user)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"trả 401 nếu chưa đăng nhập (không có req.user)"},{"ancestorTitles":["authorize middleware"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"authorize middleware trả 403 nếu role không được phép","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"trả 403 nếu role không được phép"},{"ancestorTitles":["authorize middleware"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"authorize middleware gọi next() nếu role hợp lệ","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"gọi next() nếu role hợp lệ"}],"endTime":1763920722086,"message":"","name":"D:\\cnpm\\cnpm\\order\\tests\\auth.middleware.test.js","startTime":1763920721978,"status":"passed","summary":""}],"wasInterrupted":false}
