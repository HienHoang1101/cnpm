# Render manifest: staging services for the microservices in this repo
# NOTE: This file defines services but intentionally does NOT store secrets.
# After creating services on Render, set secret env vars (MONGO_URI, STRIPE keys, etc.)

services:
  - type: web
    name: order-staging
    env: docker
    repo: https://github.com/HienHoang1101/cnpm
    branch: main
    dockerfilePath: order/Dockerfile
    plan: free
    instanceCount: 1
    healthCheckPath: /health
    envVars:
      - key: NODE_ENV
        value: staging
      - key: MONGO_URI
        sync: false
      - key: AUTH_SERVICE_URL
        sync: false
      - key: NOTIFICATION_SERVICE_URL
        sync: false

  - type: web
    name: auth-staging
    env: docker
    repo: https://github.com/HienHoang1101/cnpm
    branch: main
    dockerfilePath: auth/Dockerfile
    plan: free
    instanceCount: 1
    healthCheckPath: /health
    envVars:
      - key: NODE_ENV
        value: staging
      - key: MONGO_URI
        sync: false

  - type: web
    name: payment-staging
    env: docker
    repo: https://github.com/HienHoang1101/cnpm
    branch: main
    dockerfilePath: payment-service/Dockerfile
    plan: free
    instanceCount: 1
    healthCheckPath: /health
    envVars:
      - key: NODE_ENV
        value: staging
      - key: MONGO_URI
        sync: false
      - key: STRIPE_SECRET_KEY
        sync: false
      - key: STRIPE_WEBHOOK_SECRET
        sync: false

  - type: web
    name: admin-staging
    env: docker
    repo: https://github.com/HienHoang1101/cnpm
    branch: main
    dockerfilePath: admin-service/Dockerfile
    plan: free
    instanceCount: 1
    healthCheckPath: /health
    envVars:
      - key: NODE_ENV
        value: staging
      - key: MONGO_URI
        sync: false

  - type: web
    name: notification-staging
    env: docker
    repo: https://github.com/HienHoang1101/cnpm
    branch: main
    dockerfilePath: notification-service/Dockerfile
    plan: free
    instanceCount: 1
    healthCheckPath: /health
    envVars:
      - key: NODE_ENV
        value: staging
      - key: MONGO_URI
        sync: false
      - key: KAFKA_BOOTSTRAP_SERVERS
        sync: false

  - type: web
    name: restaurant-staging
    env: docker
    repo: https://github.com/HienHoang1101/cnpm
    branch: main
    dockerfilePath: restaurant/Dockerfile
    plan: free
    instanceCount: 1
    healthCheckPath: /health
    envVars:
      - key: NODE_ENV
        value: staging
      - key: MONGO_URI
        sync: false
      - key: ORDERS_SERVICE_URL
        sync: false

# End of render.yaml
